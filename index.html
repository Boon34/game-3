<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boon's Adventure: Care Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --main-font: 'Quicksand', sans-serif;
            --box-bg: rgba(0, 0, 0, 0.6);
            --text-color: #fff;
            --highlight: #54f357; 
            --btn-hover: #ff69b4;
            --btn-back: #ffcc00; /* M√†u ri√™ng cho n√∫t Back */
        }

        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #333; font-family: var(--main-font); }

        #game-stage {
            position: relative;
            width: 100%;
            height: 100vh;
            background-image: url('bg.png'); 
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
        }

        /* --- C·∫§U H√åNH M√àO (N√âT CƒÇNG - KH√îNG M·ªú) --- */
        #hero-cat {
            position: absolute;
            bottom: 34%; 
            left: 5%;
            width: 110px; 
            height: auto;
            transition: left 2.5s linear;
            z-index: 10;
            
            /* T·∫Øt ch·∫ø ƒë·ªô h√≤a tr·ªôn ƒë·ªÉ kh√¥ng b·ªã trong su·ªët */
            mix-blend-mode: normal !important; 
            opacity: 1 !important;             
            filter: none !important;           
            
            /* Gi·ªØ ƒë·ªô n√©t Pixel */
            image-rendering: pixelated; 
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .walking { animation: bounce 0.4s infinite alternate; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-8px); } }

        /* --- H·ªòP THO·∫†I --- */
        #dialogue-box {
            position: absolute;
            bottom: 20px; 
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 400px; 
            background: var(--box-bg);
            border: 1px solid rgba(255,255,255,0.3);
            padding: 15px 20px;
            color: #fff;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            backdrop-filter: blur(5px);
        }

        #speaker { 
            color: var(--highlight); 
            margin-bottom: 5px; 
            font-size: 0.9rem; 
            font-weight: 700;
            text-transform: uppercase;
        }
        
        #content { 
            font-size: 0.9rem; 
            line-height: 1.5; 
            margin-bottom: 15px; 
            min-height: 30px; 
            white-space: pre-wrap; 
        }
        
        .btn-group { display: flex; flex-direction: column; gap: 8px; }
        
        .game-btn {
            background: rgba(255,255,255,0.15); 
            color: #fff; 
            border: 1px solid rgba(255,255,255,0.1);
            padding: 10px 12px; 
            font-family: var(--main-font); 
            font-size: 0.85rem; 
            border-radius: 6px;
            cursor: pointer; 
            text-align: left; 
            transition: all 0.2s;
        }
        
        .game-btn:hover { 
            background: var(--btn-hover);
            border-color: var(--btn-hover);
            padding-left: 15px;
        }

        /* Style ri√™ng cho n√∫t Quay l·∫°i */
        .btn-back {
            border-color: rgba(255, 204, 0, 0.5);
            color: #ffeb3b;
        }
        .btn-back:hover {
            background: var(--btn-back);
            color: #000;
            border-color: var(--btn-back);
        }
        
        .hidden { display: none !important; }

        #summary-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 200;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; text-align: center;
        }
    </style>
</head>
<body>

    <div id="game-stage">
        <img id="hero-cat" src="cat.png" alt="Boon">
        
        <div id="dialogue-box">
            <div id="speaker">BOON REAL COOL</div>
            <div id="content">Loading...</div>
            <div class="btn-group" id="choices"></div>
        </div>

        <div id="summary-screen" class="hidden">
            <h2 style="color: #54f357; margin-bottom: 20px;">MENU CHƒÇM S√ìC ‚ù§Ô∏è</h2>
            <div id="final-menu" style="text-align: left; line-height: 1.8; font-size: 0.9rem; border: 1px dashed #fff; padding: 25px; border-radius: 10px; background: rgba(255,255,255,0.05);"></div>
            <p style="margin-top: 30px; color: #ff69b4; font-size: 0.8rem; font-style: italic;">"Ch·ª•p l·∫°i m√†n h√¨nh g·ª≠i anh nh√©!"</p>
        </div>
    </div>

    <script>
        const POSITIONS = {
            START: 5,
            STATION_1: 30, 
            STATION_2: 55, 
            STATION_3: 80, 
            END: 120       
        };

        const cat = document.getElementById('hero-cat');
        const dialogBox = document.getElementById('dialogue-box');
        const contentDiv = document.getElementById('content');
        const choicesDiv = document.getElementById('choices');
        let userMenu = [];

        // --- K·ªäCH B·∫¢N GAME ---
        const STORY = {
            start: {
                text: "Ch√†o c√¥ng ch√∫a! Boon ƒë√£ s·∫µn s√†ng h·ªô t·ªëng b·∫°n ƒëi t√¨m s·ª± th∆∞ gi√£n ƒë√¢y. ƒêi th√¥i n√†o!",
                choices: [
                    { text: "ƒêi th√¥i Boon ∆°i! üêæ", nextState: 'station1', move: POSITIONS.STATION_1 }
                ]
            },
            
            // --- TR·∫†M 1: ƒÇN U·ªêNG ---
            station1: {
                text: "TR·∫†M 1: N·∫†P NƒÇNG L∆Ø·ª¢NG üç≤\nB·ª•ng ƒëang kh√≥ ch·ªãu, b·∫°n mu·ªën d√πng g√¨?",
                choices: [
                    { text: "N∆∞·ªõc ·∫•m", nextState: 'st1_water_info' },
                    { text: "Hoa qu·∫£", nextState: 'st1_fruit_info' },
                    { text: "ƒÇn v·∫∑t (Bim bim/Socola)", nextState: 'st1_snack_menu' }
                ]
            },
            // Chi ti·∫øt N∆∞·ªõc ·∫•m
            st1_water_info: {
                text: "üíß L·ª¢I √çCH C·ª¶A N∆Ø·ªöC ·∫§M:\nGi√∫p gi√£n c∆° t·ª≠ cung, gi·∫£m ƒëau b·ª•ng hi·ªáu qu·∫£ v√† tƒÉng c∆∞·ªùng l∆∞u th√¥ng m√°u gi√∫p c∆° th·ªÉ d·ªÖ ch·ªãu h∆°n.",
                choices: [
                    { text: "Tuy·ªát v·ªùi, ch·ªçn m√≥n n√†y! ‚ñ∫", nextState: 'station2', move: POSITIONS.STATION_2, save: "N∆∞·ªõc ·∫•m" },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i ch·ªçn kh√°c", nextState: 'station1', isBack: true }
                ]
            },
            // Chi ti·∫øt Hoa qu·∫£
            st1_fruit_info: {
                text: "üçé L·ª¢I √çCH C·ª¶A HOA QU·∫¢:\nCung c·∫•p Vitamin, gi·∫£m m·ªát m·ªèi.\n\n‚ú® G·ª£i √Ω: D∆∞a h·∫•u, Cam, Chu·ªëi, ·ªîi.",
                choices: [
                    { text: "Ok, s·∫Ω ƒëi ƒÉn hoa qu·∫£! ‚ñ∫", nextState: 'station2', move: POSITIONS.STATION_2, save: "Hoa qu·∫£ (Cam/·ªîi/Chu·ªëi...)" },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i ch·ªçn kh√°c", nextState: 'station1', isBack: true }
                ]
            },
            // Menu ƒÇn v·∫∑t
            st1_snack_menu: {
                text: "B·∫°n th√®m m√≥n ƒÉn v·∫∑t n√†o?",
                choices: [
                    { text: "Bim bim ü•î", nextState: 'st1_bimbim_menu' },
                    { text: "Socola üç´", nextState: 'st1_choco_info' },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i", nextState: 'station1', isBack: true }
                ]
            },
            // Menu Bim bim
            st1_bimbim_menu: {
                text: "Ch·ªçn lo·∫°i Bim bim y√™u th√≠ch n√†o:",
                choices: [
                    { text: "Bim bim Lays (Khoai t√¢y)", nextState: 'st1_lays_info' },
                    { text: "Bim bim C√† chua", nextState: 'st1_tomato_info' },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i", nextState: 'st1_snack_menu', isBack: true }
                ]
            },
            st1_lays_info: {
                text: "ü•î LAYS:\nNh·ªØng l√°t khoai t√¢y v√†ng ∆∞∆°m, gi√≤n r·ª•m. ƒÇn v√†o l√† th·∫•y vui v·∫ª, x·∫£ stress ngay l·∫≠p t·ª©c!",
                choices: [
                    { text: "Ch·ªët ƒë∆°n Lays! ‚ñ∫", nextState: 'station2', move: POSITIONS.STATION_2, save: "Bim bim Lays" },
                    { text: "‚¨ÖÔ∏è ƒê·ªïi √Ω, ch·ªçn v·ªã kh√°c", nextState: 'st1_bimbim_menu', isBack: true }
                ]
            },
            st1_tomato_info: {
                text: "üçÖ BIM BIM C√Ä CHUA:\nV·ªã chua ng·ªçt tu·ªïi th∆° th·∫ßn th√°nh, ƒÉn cu·ªën kh√¥ng ng·ª´ng ƒë∆∞·ª£c!",
                choices: [
                    { text: "Ch·ªët ƒë∆°n v·ªã C√† chua! ‚ñ∫", nextState: 'station2', move: POSITIONS.STATION_2, save: "Bim bim C√† chua" },
                    { text: "‚¨ÖÔ∏è ƒê·ªïi √Ω, ch·ªçn v·ªã kh√°c", nextState: 'st1_bimbim_menu', isBack: true }
                ]
            },
            st1_choco_info: {
                text: "üç´ L·ª¢I √çCH C·ª¶A SOCOLA:\nSocola ƒëen ch·ª©a Magie gi√∫p gi·∫£m ƒëau b·ª•ng kinh v√† k√≠ch th√≠ch 'hormone h·∫°nh ph√∫c'.",
                choices: [
                    { text: "Ch·ªët ƒë∆°n Socola! ‚ñ∫", nextState: 'station2', move: POSITIONS.STATION_2, save: "Socola" },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i", nextState: 'st1_snack_menu', isBack: true }
                ]
            },


            // --- TR·∫†M 2: C∆† TH·ªÇ ---
            station2: {
                text: "TR·∫†M 2: SPA T·∫†I GIA üõÅ\nƒêi ƒë∆∞·ª£c n·ª≠a ƒë∆∞·ªùng r·ªìi. B·∫°n mu·ªën chƒÉm s√≥c c∆° th·ªÉ th·∫ø n√†o?",
                choices: [
                    { text: "Ng√¢m ch√¢n n∆∞·ªõc ·∫•m", nextState: 'st2_soak_steps' },
                    { text: "Skincare t·ªëi gi·∫£n", nextState: 'st2_skincare_steps' }
                ]
            },
            st2_soak_steps: {
                text: "ü¶∂ C√ÅC B∆Ø·ªöC NG√ÇM CH√ÇN:\n1. N∆∞·ªõc ·∫•m ~40 ƒë·ªô.\n2. Th√™m g·ª´ng + mu·ªëi(c√≥ ho·∫∑c kh√¥ng).\n3. Ng√¢m 15-20p.\n4. Lau kh√¥, ƒëi t·∫•t ·∫•m.",
                choices: [
                    { text: "ƒê√£ nh·ªõ, ƒëi ti·∫øp th√¥i! ‚ñ∫", nextState: 'station3', move: POSITIONS.STATION_3, save: "Ng√¢m ch√¢n n∆∞·ªõc ·∫•m" },
                    { text: "‚¨ÖÔ∏è Xem Skincare th·ª≠", nextState: 'station2', isBack: true }
                ]
            },
            st2_skincare_steps: {
                text: "‚ú® C√ÅC B∆Ø·ªöC SKINCARE:\n1. R·ª≠a m·∫∑t s·∫°ch.\n2. Toner c·∫•p ·∫©m.\n3. Kem d∆∞·ª°ng m·ªèng nh·∫π.\n(T·ªëi gi·∫£n ƒë·ªÉ da th·ªü nh√©!)",
                choices: [
                    { text: "ƒê√£ nh·ªõ, ƒëi ti·∫øp th√¥i! ‚ñ∫", nextState: 'station3', move: POSITIONS.STATION_3, save: "Skincare t·ªëi gi·∫£n" },
                    { text: "‚¨ÖÔ∏è Xem Ng√¢m ch√¢n th·ª≠", nextState: 'station2', isBack: true }
                ]
            },


            // --- TR·∫†M 3: TINH TH·∫¶N ---
            station3: {
                text: "TR·∫†M 3: CHILL TINH TH·∫¶N üéµ\nTr·∫°m cu·ªëi r·ªìi. T·ªëi nay ch·ªët ƒë∆°n ho·∫°t ƒë·ªông g√¨ ƒë√¢y?",
                choices: [
                    { text: "Xem phim c√πng L√¢m (m·ªôt ng∆∞·ªùi kh·ªèe, hai ng∆∞·ªùi vui ü•∞)", nextState: 'st3_withLam' },
                    { text: "Xem phim m·ªôt m√¨nh (Me time)", nextState: 'st3_alone' },
                    { text: "ƒê·ªçc truy·ªán tranh & Ng·ªß s·ªõm", nextState: 'finish', move: POSITIONS.END, save: "ƒê·ªçc truy·ªán tranh" }
                ]
            },
            st3_withLam: {
                text: "üé¨ XEM PHIM C√ôNG L√ÇM:\nNh·∫Øn ngay cho ƒêinh V≈© L√¢m ƒë·ªÉ nh·∫≠n list phim hay nh√©! ‚ù§Ô∏è",
                choices: [
                    { text: "S·∫Ω nh·∫Øn ngay! ‚ñ∫", nextState: 'finish', move: POSITIONS.END, save: "Xem phim c√πng L√¢m" },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i ch·ªçn kh√°c", nextState: 'station3', isBack: true }
                ]
            },
            st3_alone: {
                text: "üçø XEM PHIM M·ªòT M√åNH:\nN·∫øu b√≠ phim, h√£y nh·∫Øn tin cho ƒêinh V≈© L√¢m ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n b·ªô phim  x·ªãn x√≤ nh√©!",
                choices: [
                    { text: "Okela! Ho√†n th√†nh ‚ñ∫", nextState: 'finish', move: POSITIONS.END, save: "Xem phim 1 m√¨nh" },
                    { text: "‚¨ÖÔ∏è Quay l·∫°i ch·ªçn kh√°c", nextState: 'station3', isBack: true }
                ]
            }
        };

        // --- H√ÄM X·ª¨ L√ù LOGIC ---
        function renderState(stateKey) {
            const data = STORY[stateKey];
            contentDiv.innerText = data.text;
            choicesDiv.innerHTML = ''; 

            data.choices.forEach(c => {
                const btn = document.createElement('button');
                btn.className = 'game-btn';
                // N·∫øu l√† n√∫t back th√¨ th√™m class ƒë·ªÉ ƒë·ªïi m√†u cho d·ªÖ nh√¨n
                if (c.isBack) btn.classList.add('btn-back');
                
                btn.innerText = c.text;
                
                btn.onclick = () => {
                    if (c.save) userMenu.push(c.save);
                    if (c.move) {
                        walkTo(c.move, c.nextState);
                    } else {
                        renderState(c.nextState);
                    }
                };
                choicesDiv.appendChild(btn);
            });
        }

        function walkTo(targetPercent, nextStoryKey) {
            dialogBox.classList.add('hidden');
            cat.classList.add('walking');
            cat.style.left = targetPercent + '%'; 
            setTimeout(() => {
                cat.classList.remove('walking');
                if (nextStoryKey === 'finish') {
                    showSummary();
                } else {
                    dialogBox.classList.remove('hidden');
                    renderState(nextStoryKey);
                }
            }, 2500);
        }

        function showSummary() {
            document.getElementById('summary-screen').classList.remove('hidden');
            const menuDiv = document.getElementById('final-menu');
            menuDiv.innerHTML = `
                <b>1. ƒÇn u·ªëng:</b> ${userMenu[0]}<br>
                <b>2. Body:</b> ${userMenu[1]}<br>
                <b>3. Spirit:</b> ${userMenu[2]}
            `;
        }

        renderState('start');
    </script>
</body>
</html>
